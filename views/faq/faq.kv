

<Faq>:
    
    orientation:"vertical"
    padding:[dp(6)]
    canvas.before:
        Color:
            rgba:app.colors.white
        Rectangle:
            pos:self.pos    
            size:self.size
    BoxLayout:
        orientation:"vertical"
        size_hint_y: .2
        padding:[dp(5), 0, dp(10), 0]
        spacing:dp(5)
        ButtonIcon:
            size_hint: 1, .05
            text:icon("icon-chevron-left")
            color:[0,0,0,1]
            bold:True
            font_size:app.fonts.size.h1
            on_release:
                root.parent.manager.current = "scrn_settings"
                root.parent.manager.transition.direction = "left"
        BoxLayout:
            size_hint: 1, .05
            padding:[dp(25),0,0,0]
            canvas.before:
                Color:
                    rgba:[0,1,1,0]
                Rectangle:
                    size:self.size
                    pos:self.pos
            Label:
                
                size_hint: 1, 1
                text: "FAQS"
                color:[0,0,0,1]
                text_size:self.size 
                halign:"left"
                valign:"middle"
                font_size:app.fonts.size.h1
                
    MDBoxLayout:
        orientation:"vertical"
        size_hint_y: .8
        MDTabs:
            id:tabs
            background_color:app.colors.white
            text_color_normal:app.colors.black
            text_color_active:rgba("#6167E9")
            indicator_color:rgba("#6167E9")
            #TAB
            Tab:
                
                icon:""
                title:"Feedback"
                BoxLayout:
                    spacing:dp(10)
                    canvas.before:
                        Color:
                            rgba:[0,0,1,0]
                        Rectangle:
                            pos:self.pos
                            size:self.size
                    orientation:"vertical"
                    padding:[dp(3), dp(10), dp(3), dp(5)]
                    BoxLayout:
                        size_hint:1, None
                        height:dp(35)
                        canvas.before:
                            Color:
                                rgba:[0,0,1,0]
                            Rectangle:
                                pos:self.pos
                                size:self.size
                        MDLabel:
                            canvas.before:
                                Color:
                                    rgba:[0,1,1,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size
                            text:"Ratings and Reviews"
                            bold:True
                            font_size:app.fonts.size.h4
                        MDRaisedButton:
                            canvas.before:
                                Color:
                                    rgba:[1,0,1,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size
                            text: "Review"
                            md_bg_color: rgba("#6167E9") # opens dialog to give stars and comment like playstore
                            on_release:root.show_review_dialog()
                    
                    # average rating and graph
                    BoxLayout:
                        canvas.before:
                            Color:
                                rgba:[1,0,1,0]
                            Rectangle:
                                pos:self.pos
                                size:self.size
                        orientation:"horizontal"
                        size_hint:1, None
                        height:dp(150)
                        BoxLayout:
                            canvas.before:
                                Color:
                                    rgba:[1,0,0,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size
                            orientation:"vertical"
                            size_hint_x:.4
                            padding:[dp(15), dp(25), dp(10), dp(20) ]
                            BoxLayout:
                                orientation:"vertical"
                                size_hint:1,1
                                spacing:dp(10)
                                BoxLayout:
                                    MDLabel:
                                        
                                        text:"4.4"
                                        font_size:dp(50)
                                        color: [0,0,0,1]
                                        halign:"center"
                                        shorten:True
                                BoxLayout: # add id to each icon so the color can be manipulated later
                                    size_hint:1,1
                                    MDIcon:
                                        pos_hint:{"center_y":.5}
                                        icon:"star"
                                        icon_size: dp(20)
                                        theme_text_color: "Custom"
                                        text_color: rgba("#0F9D58")
                                        
                                    MDIcon:
                                        pos_hint:{"center_y":.5}
                                        icon:"star"
                                        icon_size: dp(20)
                                        theme_text_color: "Custom"
                                        text_color: rgba("#0F9D58")
                                        
                                    MDIcon:
                                        pos_hint:{"center_y":.5}
                                        icon:"star"
                                        icon_size: dp(20)
                                        theme_text_color: "Custom"
                                        text_color: rgba("#0F9D58")
                                        
                                    MDIcon:
                                        pos_hint:{"center_y":.5}
                                        icon:"star-half-full"
                                        icon_size: dp(20)
                                        theme_text_color: "Custom"
                                        text_color: rgba("#0F9D58")
                             
                                    MDIcon:
                                        pos_hint:{"center_y":.5}
                                        icon:"star-outline"
                                        icon_size: dp(20)
                                        theme_text_color: "Custom"
                                        text_color: rgba("#0F9D58")
                                      
                                       
                                MDLabel:
                                    
                                    text:"9,353,934"
                                    font_size:dp(18)
                                    color: rgba("#646464")
                                    bold:True
                                    halign:"center"
                        BoxLayout:
                        
                            canvas.before:
                                Color:
                                    rgba:[0,1,0,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size
                            orientation:"vertical"
                            size_hint_x:.6
                            BoxLayout:#use boxlayouts, graph size is roundedrectagnles size, one roundedrectagnel box layout inside another, size is proportion of stars
                                orientation:"horizontal"
                                BoxLayout:
                                    orientation:"vertical"
                                    size_hint_x:.2
                                    canvas.before:
                                        Color:
                                            rgba:[1,0,0,0]
                                        Rectangle:
                                            pos:self.pos
                                            size:self.size
                                    MDLabel:
                                    
                                        text:"5"
                                        font_size:dp(18)
                                        color: [0,0,0,1]
                                        halign:"center"
                                    MDLabel:
                                        
                                        text:"4"
                                        font_size:dp(18)
                                        color: [0,0,0,1]
                                        halign:"center"
                                    MDLabel:
                                        
                                        text:"3"
                                        font_size:dp(18)
                                        color: [0,0,0,1]
                                        halign:"center"
                                    MDLabel:
                                        
                                        text:"2"
                                        font_size:dp(18)
                                        color: [0,0,0,1]
                                        halign:"center"
                                    MDLabel:
                                        
                                        text:"1"
                                        font_size:dp(18)
                                        color: [0,0,0,1]
                                        halign:"center"
                                BoxLayout:
                                    
                                    orientation:"vertical"
                                    size_hint_x:.8
                                    ##### bar 1
                                    StarBar:
                                        total_stars:100
                                        stars:20
                                    ##### bar 2
                                    StarBar:
                                        total_stars:100
                                        stars:40
                                    ##### bar 3
                                    StarBar:
                                        total_stars:100
                                        stars:35
                                    ##### bar 4
                                    StarBar:
                                        total_stars:100
                                        stars:5
                                    ##### bar 5
                                    StarBar:
                                        total_stars:100
                                        stars:0
                    # CARDS BOX    
                    ScrollView:
                        # padding:[0, dp(10), 0, dp(20)]
                        do_scroll_x: False
                        do_scroll_y: True 
                        id:reviews_scroll               
                        BoxLayout: 
                            orientation:"vertical"
                            canvas.before:
                                Color:
                                    rgba:[1,0,0,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size   
                            padding:[dp(3), dp(15), dp(3), dp(10)]
                            size_hint_min_y: None
                            size_hint_y: None
                            height: self.minimum_height
                            spacing:dp(20)
                            # card                     
                            ReviewCard:
                                
                                profile_pic:"assets/imgs/result.png"
                                name:"Yahra Assiz"
                                date:"11/10/2010"
                                review_text:"Really. I have never seen such a smoth app. The app is easy to use and fast. Best ratings in the market. Can't wait for the new releases. I love you guys. Thank YOU!"
                                stars:[1,0,0,0,0]                            
                            ReviewCard:
                      
                            ReviewCard:
                                
                                profile_pic:"assets/imgs/result.png"
                                name:"Patrick Colesman"
                                date:"01/01/2022"
                                review_text:"Really. I have never seen such a smoth app. The app is easy to use and fast. Best ratings in the market. Can't wait for the new releases. I love you guys. Thandoinbdoibniobndfgoibnfonbfbnfgiunbiunbiudnbfdnbidunbduinbiudnbiufdnbiudnbiudnibundiubnfdiubndiunbdiunbiudnbiudnbiudnbiudnbiudnbiundiubnfdiunbdiuk YOU!"
                                stars:[1,1,2,0,0]
                            #Widget:
                            
                    
                    



            #TAB FAQ
            Tab:
                
                icon:""
                title:"FAQS"
                
                BoxLayout:
                    orientation:"vertical"
                    padding:[0, dp(10), 0, dp(5)]
                    
                    BoxLayout:
                        orientation:"vertical"
                        size_hint_y:None
                        height:dp(50)
                        padding:[dp(5), 0, dp(5), 0]
                        SearchBar:
                            id:search_bar
                            hint_text:"Search for most asked questions"
                        
                    ScrollView:
                        # padding:[0, dp(10), 0, dp(20)]
                        do_scroll_x: False
                        do_scroll_y: True 
                        id:scroll_faqs
                        BoxLayout:
                            orientation:"vertical"
                            id:base_box_layout
                            #Group of topics About  
                            # Fazer componente so com cada question para poder adicionar no futuro
                            size_hint_min_y: None
                            size_hint_y: None
                            height: self.minimum_height
                            canvas.before:
                                Color:
                                    rgba:[0,0,1,0]
                                Rectangle:
                                    pos:self.pos
                                    size:self.size
                            BoxLayout:
                                id:base_for_topics
                                orientation:"vertical"
                                size_hint_min_y: None
                                size_hint_y: None
                                height: self.minimum_height
                                  
                                  
                                        
                            BoxLayout:
                                id:lookup_questions
                                orientation:"vertical"
                                size_hint_min_y:None
                                size_hint_y:None
                                height:self.minimum_height
                                disabled:True
                                opacity:0
                                MDIconButton:
                                    #size_hint_x:.2
                                    icon:"close"
                                    on_release:root.close_lookup_box()            
            # Widget:

                
                

    



<Tab>:
    
<Question>:

    orientation:"vertical"
    size_hint_y:None
    height:self.minimum_height
    spacing:dp(3)
    BoxLayout:
        orientation:"horizontal"
        size_hint_y:None
        height:self.minimum_height
        spacing:dp(2)
        canvas.before:
            Color:
                rgba:[1,0,0,0]
            Rectangle:
                pos:self.pos
                size:self.size
        MDLabel:
            canvas.before:
                Color:
                    rgba:[0,1,0,0]
                Rectangle:
                    pos:self.pos
                    size:self.size
            text:"[b]" + root.question + "[/b]"#str(self.y+self.parent.height/2)
            #text_size: self.size
            valign: "middle"
            font_size: app.fonts.size.h4
            shorten_from: "right" # not working bc shorten is false
            shorten: False
            color: [0,0,0, 1]
            markup: True
            size_hint_y:None
            height: dp(20)
            pos_hint:{"center_y":.5}

        #Default height of mdiconbutton is bigger than dp(20)   
        MDIconButton:
            canvas.before:
                Color:
                    rgba:[0,0,1,0]
                Rectangle:
                    pos:self.pos
                    size:self.size
            id:min_max_close1
            icon:"arrow-up-drop-circle-outline"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release:root.min_max_answer(self, answer_id, answer_box_id)
            font_size:app.fonts.size.h5
            size_hint_y:None
            height:dp(20)
    BoxLayout:
        id:answer_box_id
        canvas.before:
            Color:
                rgba:[0,1,0,0]
            Rectangle:
                pos:self.pos
                size:self.size
        orientation:"horizontal"
        size_hint_y:None
        height:self.minimum_height
        spacing:dp(2)
        Text:
            id:answer_id
            text:root.answer
            shorten:False
            halign:"left"
            text_size: self.width, None
            size_hint: 1, None
            height: self.texture_size[1]

<TopicQuestion>:
    id:root.id
    canvas.before:
        Color:
            rgba:[0,0,0,0]
        Rectangle:
            pos:self.pos
            size:self.size
    orientation:"vertical"
    size_hint_y:None
    height:self.minimum_height
    # Topic title
    MDLabel:
        id:something
        text: root.topic
        bold:True
        color:rgba("#6167E9")
        font_size:app.fonts.size.h2
        size_hint_y:None
        height:dp(20)
    # Add each question in parallel to MDLabel, add_widget to TopicQuestion

<StarBar>: # This is  a BoxLayout!!!!
                               
    size_hint_y: .2
    #height:dp(20)
    padding:[0,0,0,dp(10)]
    BoxLayout:
        size_hint:1, .4

        canvas.before:
            Color:
                rgba:rgba("#EBEBEB")
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[8]
        BoxLayout:
            size_hint:1,1
            canvas.before:
                Color:
                    rgba:rgba("#0F9D58")
                RoundedRectangle:
                    size:(((self.size[0] * root.stars)/root.total_stars), self.size[1])
                    pos:self.pos
                    radius:[8]

<ReviewCard>:
    
    size_hint:1, None
    size_hint_min_y: self.children[0].height 
    height:self.minimum_height
    padding:[dp(2)]
    bcolor:rgba("#E1E1E1") 
    radius: [10]
    BackBox:
        orientation:"vertical"
        radius: [10]
        bcolor:rgba("#ffffff") # This color can either be light purple (#DCE3F9) or purple (#5B63CD)
        size_hint:1, None
        height: self.minimum_height
        pos_hint: {'center_x': .5}
        padding:[dp(6), dp(4), dp(4), dp(6) ]
        spacing:dp(8)
        BoxLayout:  # has profile icon, name and dropdown list
            canvas.before:
                Color:
                    rgba:[1,0,0,0]
                Rectangle:
                    pos:self.pos
                    size:self.size   
            orientation:"horizontal"
            size_hint_y:None
            height:self.minimum_height
            padding:[dp(4), dp(1), dp(2), dp(3) ]
            spacing:dp(10)
            ShadowBox:
                radius:[self.height]
                size_hint:None, None
                size:[dp(42), dp(42)]
                #padding:dp(10)
                IconButton:
                    source:root.profile_pic
            MDLabel:
                text:root.name
                valign:"middle"
            Widget:
                
            MDIconButton:
                id:dots_flag
                icon:"dots-vertical"
                on_release:root.open_dropdown_dots()
        BoxLayout:  # has stars and date of publish
            canvas.before:
                Color:
                    rgba:[0,1,0,0]
                Rectangle:
                    pos:self.pos
                    size:self.size   
            orientation:"horizontal"
            size_hint_y:None
            height:self.minimum_height  # label date is setting the height for this boxlayout
            BoxLayout: 
                size_hint:1,1
                MDIcon:
                    pos_hint:{"center_y":.5}
                    icon: root.which_star(root.stars[0])
                    icon_size: dp(1)
                    theme_text_color: "Custom"
                    text_color: rgba("#0F9D58")
                    
                MDIcon:
                    pos_hint:{"center_y":.5}
                    icon:root.which_star(root.stars[1])
                    icon_size: dp(1)
                    theme_text_color: "Custom"
                    text_color: rgba("#0F9D58")
                    
                MDIcon:
                    pos_hint:{"center_y":.5}
                    icon:root.which_star(root.stars[2])
                    icon_size: dp(1)
                    theme_text_color: "Custom"
                    text_color: rgba("#0F9D58")
                    
                MDIcon:
                    pos_hint:{"center_y":.5}
                    icon:root.which_star(root.stars[3])
                    icon_size: dp(1)
                    theme_text_color: "Custom"
                    text_color: rgba("#0F9D58")
        
                MDIcon:
                    pos_hint:{"center_y":.5}
                    icon:root.which_star(root.stars[4])
                    icon_size: dp(1)
                    theme_text_color: "Custom"
                    text_color: rgba("#0F9D58")
            MDLabel:
                size_hint: 1, None
                size: self.texture_size
                text:root.date
                color:rgba("#686868")
            Widget:
                size_hint_x:.4
        BoxLayout: # has review text
            canvas.before:
                Color:
                    rgba:[0,0,1,0]
                Rectangle:
                    pos:self.pos
                    size:self.size  
            size_hint_y:None
            height:self.minimum_height
            MDLabel: 
                size_hint: 1, None
                size: self.texture_size
                text:root.review_text
                color:rgba("#616161")
                #max_lines:5

        BoxLayout:  # has grey bar
            canvas.before:
                Color:
                    rgba: rgba('#E1E1E1')
                Rectangle:
                    pos:self.pos
                    size:[self.size[0]-dp(250), dp(2)]  
            size_hint_y:None
            height:dp(10)
        BoxLayout: # has "review...helpful" and 2 buttons for yes/no
            canvas.before:
                Color:
                    rgba:[1,0,1,0]
                Rectangle:
                    pos:self.pos
                    size:self.size   
            orientation:"horizontal"
            size_hint_y:None
            height:self.minimum_height
            spacing:dp(10)
            MDLabel:
                text:"Was this review helpful?"
                color:rgba("#616161")
                font_size:dp(15)
                size_hint_x:.5
            Widget:
                size_hint_x:.1
            MDRoundFlatButton:
                id:yes
                text: "Yes"
                text_color: rgba("#616161")
                line_color: rgba("#444444")
                line_width:dp(1)
                size_hint_x:.2
                on_release: root.helpful_question_yes()
            MDRoundFlatButton:
                id:no
                text: "No"
                text_color: rgba("#616161")
                line_color: rgba("#444444")
                line_width:dp(1)
                size_hint_x:.2
                on_release: root.helpful_question_no()
        #Widget:

<ReviewContent>:
    orientation: "vertical"
    size_hint_y: None
    height:dp(500)
    
    BoxLayout:
        orientation: "vertical"
        spacing: "12dp"
        size_hint_y: 1
        # canvas.before:
        #     Color:
        #         rgba:[1,0,1,1]
        #     Rectangle:
        #         pos:self.pos
        #         size:self.size  
        BoxLayout: 
            size_hint:1,None
            height:dp(50)
            MDIconButton:
                id:star1
                pos_hint:{"center_y":.5}
                icon: "star-outline" 
                icon_size: dp(30)
                theme_text_color: "Custom"
                text_color: rgba("#0F9D58")
                on_press:root.on_click_star("star1")
                ripple_alpha:0
            MDIconButton:
                id:star2
                pos_hint:{"center_y":.5}
                icon: "star-outline" 
                icon_size: dp(30)
                theme_text_color: "Custom"
                text_color: rgba("#0F9D58")
                on_press:root.on_click_star("star2")
                ripple_alpha:0
            MDIconButton:
                id:star3
                pos_hint:{"center_y":.5}
                icon: "star-outline" 
                icon_size: dp(30)
                theme_text_color: "Custom"
                text_color: rgba("#0F9D58")
                on_press:root.on_click_star("star3")
                ripple_alpha:0
            MDIconButton:
                id:star4
                pos_hint:{"center_y":.5}
                icon: "star-outline" 
                icon_size: dp(30)
                theme_text_color: "Custom"
                text_color: rgba("#0F9D58")
                on_press:root.on_click_star("star4")
                ripple_alpha:0
            MDIconButton:
                id:star5
                pos_hint:{"center_y":.5}
                icon: "star-outline" 
                icon_size: dp(30)
                theme_text_color: "Custom"
                text_color: rgba("#0F9D58")
                on_press:root.on_click_star("star5")
                ripple_alpha:0

        MDTextField:
            id:review_text
            size_hint:1,None
            height:dp(450)
            hint_text: "Describe your experience (optional)"
            multiline:True
            hint_text_color_focus: rgba("#9F9F9F")
            selection_color: 233/255, 241/255, 255/255, .5
            text_color_focus:rgba("#000000")
            text_color_normal:rgba("#404040")
            line_color_focus: rgba("#616161")
            line_color_normal: rgba("#f5f5f5")
        Widget:
        
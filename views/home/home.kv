

<Home>:
    id:homeLayout
    _my_location_label:"Start"
    _destination_label: "Destination"
    orientation: "vertical"
    canvas.before:
        Color:
            rgba: app.colors.white
        Rectangle:
            pos:self.pos
            size:self.size
    # Top purple element
    SoftBox:
        
        orientation: 'vertical'
        size_hint_y: .25
        orientation: 'vertical'
        radius: [0, 0, 0,  dp(42)]
        padding: dp(14)
        vertical: False
        bcolor: [rgba(108, 112, 244), app.colors.primary]
        BoxLayout:
            orientation: "horizontal"
            size_hint_x:1
            BoxLayout:
                size_hint_x:.7
                orientation: "vertical"
                padding:[0,dp(20),0,dp(25)]  
 
                Label:
                    canvas.before:
                        Color:
                            rgba: [0,0,0,0]
                        Rectangle:
                            pos:self.pos
                            size:self.size 
                    size_hint: 1, 1
                    text_size:self.size
                    text:"Hi, Wesley !"
                    halign:"left"
                    font_size: app.fonts.size.h1
                    font_name:app.fonts.heading
                    bold:True
                
                Label:
                    canvas.before:
                        Color:
                            rgba: [0,1,0,0]
                        Rectangle:
                            pos:self.pos
                            size:self.size 
                    halign:"left"
                    size_hint: 1, 1
                    text_size:self.size
                    font_size: app.fonts.size.h3
                    font_name:app.fonts.subheading
                    text:"Check out the best routes\n for your trip"
            BoxLayout:
                size_hint_x:.3    
                canvas.before:
                    Color:
                        rgba: [1,0,0,0]
                    Rectangle:
                        pos:self.pos
                        size:self.size
                AnchorLayout:
                    anchor_x:"center"
                    
                    padding:[0,0,0, dp(8)]
                    ShadowBox:
                        padding:dp(2)
                        radius: [self.height]
                        size_hint:[None, None]
                        size:[dp(66), dp(66)]
                        elevation:4
                        Widget:
                            canvas.before:
                                Color:
                                    rgba: [1,1,1,1]
                                Ellipse:
                                    pos:self.pos
                                    size:self.size
                                    source:"assets/imgs/profile3.png"

       
    BoxLayout:
        size_hint: 1, .75
        orientation: 'vertical'    
        
        canvas.before:
            Color:
                rgba: [1,0,0,0]
            Rectangle:
                pos:self.pos
                size:self.size
        
            
        BoxLayout:
            # where to box
            size_hint: 1, .35
            padding:[dp(16), 0, dp(16), dp(8)]
            canvas.before:
                Color:
                    rgba: rgba("#FFFFFF")
                Rectangle:
                    pos:self.pos
                    size:self.size
                    
            BoxLayout:
                size_hint: 1, .9
            
                orientation: 'vertical'
                #E9F1FF
                
                
                canvas.before:
                    Color:
                        rgba: rgba("#E9F1FF")
                    RoundedRectangle:
                        pos:self.pos
                        size:self.size
                        radius: [20]
                BoxLayout:
                    size_hint: None, None
                    size:self.parent.size[0] -dp(5), self.parent.size[1] -dp(5)
                    padding:[dp(5), dp(7), dp(16), dp(12)]
                    canvas.before:
                        Color:
                            rgba: rgba("#FFFFFF")
                        RoundedRectangle:
                            pos:self.pos[0]+dp(2.5) , self.pos[1]+dp(2.5)
                            size:self.size
                            radius:[20]
                    BoxLayout:
                        size_hint_x: .2
                        canvas.before:
                            Color:
                                rgba: [1,1,0,0]
                            Rectangle:
                                pos:self.pos
                                size:self.size
                        BoxLayout:
                            orientation:"vertical"
                            spacing:dp(45)
                            padding:[dp(23), 0,0,0]
                            canvas.before:
                                Color:
                                    rgba: rgba('#000fff')
                                
                                Line:
                                    points: self.x+dp(30), self.y + dp(30), self.x+dp(30) , self.top - dp(30)
                                    width: 1
                                    dash_length: dp(8)
                                    dash_offset: dp(5)
                            Text:
                                text:icon("icon-circle")
                                color:rgba("#8787F6")
                                bold:True
                            
                            
                            Text:
                                text:icon("icon-circle")
                                color:rgba("#EC8982")
                                bold:True

                        
                    BoxLayout:
                        size_hint_x: .8
                        orientation:"vertical"
                        canvas.before:
                            Color:
                                rgba: [0,1,0,0]
                            Rectangle:
                                pos:self.pos
                                size:self.size
                        BoxLayout:
                            canvas.before:
                                Color:
                                    rgba: rgba('#E1EAFE')
                                Rectangle:
                                    pos:self.pos
                                    size:[self.size[0], dp(1)]
                            BoxLayout:
                                size_hint_x: .7
                                orientation:"vertical"
                                padding:[0,dp(8),0, dp(8)]
                                Label:
                                    text:"From"
                                    font_size:app.fonts.size.h5
                                    color: rgba("#E1E1E1")
                                    text_size: self.size
                                    halign:"left"
                                    font_name:app.fonts.heading
                                
                                Label:
                                    
                                    text:root._my_location_label
                                    font_size:app.fonts.size.h5
                                    color: app.colors.black
                                    shorten_from: "right"
                                    shorten: True
                                    text_size: self.size
                            Widget:
                                size_hint_x: .1
                            AnchorLayout:
                                size_hint_x: .2
                                padding:[dp(16), 0,0,0]
                                anchor_x:"right"
                                ButtonIcon:
                                    id:my_local_button
                                    text:icon("icon-x-circle")
                                    color:[0,0,0,1]
                                    bold:True
                                    font_size:app.fonts.size.h3
                                    on_press:root.on_press_my_location()

                                
                                    
                        BoxLayout:
                            canvas.before:
                                Color:
                                    rgba: rgba('#E1EAFE')
                                Rectangle:
                                    pos:self.pos
                                    size:[self.size[0], dp(1)]
                            BoxLayout:
                                size_hint_x: .7
                                orientation:"vertical"
                                padding:[0,dp(8),0, dp(8)]
                                Label:
                                    text:"To"
                                    font_size:app.fonts.size.h5
                                    color: rgba("#E1E1E1")
                                    text_size: self.size
                                    halign:"left"
                                    font_name:app.fonts.heading
                                    
                                
                                Label:
                                    
                                    text:root._destination_label
                                    font_size:app.fonts.size.h5
                                    color: app.colors.black
                                    shorten_from: "right"
                                    shorten: True
                                    text_size: self.size


                            Widget:
                                size_hint_x: .1
                                
                            AnchorLayout:
                                size_hint_x: .2
                                padding:[dp(16), 0,0,0]
                                anchor_x:"right"
                                ButtonIcon:
                                    id:destination_local_button
                                    text:icon("icon-repeat")
                                    color:[0,0,0,1]
                                    bold:True
                                    font_size:app.fonts.size.h3
                                    on_press:root.on_press_destination()
                                   
                        

                                

        BoxLayout:
            size_hint_y: .1
            spacing:dp(40)
            padding:[dp(30), dp(10), dp(30), dp(10)]
            canvas.before:
                Color:
                    rgba: [0,1,0,0]
                Rectangle:
                    pos:self.pos
                    size:self.size
            ButtonCard:
                text: "40 min"
                icon: "assets/icons/bus.png"
                
                
                
            ButtonCard:
                text: "30 min"
                icon: "assets/icons/train.png"
                
                
                
            ButtonCard:
                text: "20 min"
                icon: "assets/icons/car-convertible.png"
                state:"down"
                
                
        BoxLayout:
            size_hint: 1, .45
            padding:[ dp(8), 0, dp(8), 0  ]
            orientation:"vertical"
            
                # canvas.before:
                #     Color:
                #         rgba: [0,0,0,0]
                #     RoundedRectangle:
                #         pos:self.pos
                #         size:self.size   
                #         radius:[dp(10)]
            Map:
                
                id: main_map
               
                # Button:
                #     canvas.after:
                #         Color:
                #             rgba:[0,0,0,1]
                #         Rectangle:
                #             pos:self.pos
                #             size:self.size
                #     text:"place pin"
                #     size_hint:None, None
                #     size: self.parent.size
                #     background_color: 0, 0, 0, 0
                #     background_normal: ''
                #     pos: 0, 0
                #     on_press: root.place_my_pin()
               
                    
                   
                # app.root.ids.scrn_mngr.current = "scrn_booking_details"
                
                
        BoxLayout:
            size_hint: 1, .1
            RoundedButton:
                size:self.parent.size
                text:"Next"
                bcolor:rgba("#2BC48A")
                radius:[dp(10), dp(10), 0, 0]
                font_name:app.fonts.heading
                font_size:app.fonts.size.h3
                on_press: root.press_next()

        




<ButtonIcon@ButtonBehavior+Label>:
    text_size: self.size
    valign: "middle"
    font_name: app.fonts.heading
    shorten_from: "right"
    shorten: True
    color: root.color 
    markup: True
    bold:True
    



<ButtonCard>:
    background_normal: ''
    background_down: ''
    background_color: [0,0,0,0]
    size_hint_x: .25
    radius: [10]
    group:'tabs'
    allow_no_selection:False
    AnchorLayout:
        radius: [10]
        canvas.before:
            Color:
                rgba: rgba("#6167EB") if root.state == 'normal' else rgba("#B1B4F5")
            RoundedRectangle:
                pos:self.pos
                size:self.size
                radius:[dp(10), 0, 0, dp(10)]
        padding:[dp(8), dp(10), dp(12), dp(8)]
        Widget:
            canvas.before:
                Color:
                    rgba: rgba("#FFFFFF")  
                Rectangle:
                    pos: self.pos
                    size:[self.size[0]+dp(4), self.size[1]+dp(4)]
                    source: root.icon


    Text:
        
        canvas.before:
            Color:
                rgba: rgba("#6167EB") if root.state == 'normal' else rgba("#B1B4F5")
            RoundedRectangle:
                pos:self.pos
                size:self.size
                radius:[0, dp(10), dp(10), 0]
        halign: 'left'
        valign: 'middle'
        # 
        text: root.text
        font_name:app.fonts.heading
        font_size: app.fonts.size.h5
        color:  app.colors.white 



# fazer tipo um box laoyut ou grid e depois na class deste componente novo adicionar o mapa